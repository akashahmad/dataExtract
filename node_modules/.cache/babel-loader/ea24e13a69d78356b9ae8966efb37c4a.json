{"ast":null,"code":"import _defineProperty from \"/Users/brohik/repo/adaptive-data-file-extract/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { decorate, observable, action, configure } from \"mobx\";\nimport axios from \"axios\";\nimport { getFilterOptionsBuilding, getFilterOptionsDistrict, getFilterOptionsClass //defaultConnection,\n, getCSVFile } from \"@/stores/wrd_apis\";\n\nclass ViewModeStore {\n  constructor() {\n    this.optBuildings = [];\n    this.isBdSet = false;\n    this.optDistricts = [];\n    this.isDsSet = false;\n    this.optClasses = [];\n    this.isClSet = false;\n    this.optStudents = [];\n    this.isStSet = false;\n    this.postQuery = {};\n    this.errorData = [];\n    this.isGradeSelected = false;\n    this.isBuildingsSelected = false;\n    this.isDistrictSelected = false;\n    this.isClassSelected = false;\n    this.isEmptyData = false;\n    this.isConnectionError = false;\n\n    this.setIsGradeSelected = value => {\n      this.isGradeSelected = value;\n    };\n\n    this.setIsBuildingsSelected = value => {\n      this.isBuildingsSelected = value;\n    };\n\n    this.setIsDistrictSelected = value => {\n      this.isDistrictSelected = value;\n    };\n\n    this.setIsClassSelected = value => {\n      this.isClassSelected = value;\n    };\n\n    this.setEmptyData = condition => {\n      this.isEmptyData = condition;\n    };\n\n    this.getDownloadFile = async (data, setIsLoading) => {\n      const URL = \"http://localhost:9201/adaptive/v1/research?\";\n      const checkingUrlData = \"http://localhost:9201/adaptive/v1/research/count\";\n      axios.get(checkingUrlData, {}).then(res => {\n        console.log(\"res\", res);\n\n        if (res.data > 0) {\n          this.downloadFile(setIsLoading, URL, data);\n        } else {\n          console.log(\"No Record found of given search\");\n          this.setEmptyData(true);\n        }\n      }).catch(err => {\n        this.setEmptyData(true);\n        console.log(\"ERR\", err);\n      });\n    };\n\n    /*defaultConnection()\n    .then(res => {\n        if(res){\n        console.log(\"RES--\", res)\n            //return res.message\n        } else {\n            this.getData;\n        }\n    })\n    .catch(err => {\n     console.log(\"ERR--\",err)\n    //this.isConnectionError = true\n    //this.errorData.push(\"service is down\")\n     })\n    */\n    // const getData = () => {\n    getFilterOptionsDistrict().then(options => {\n      let districts = [];\n\n      for (let i = 0; i < options.length; i++) {\n        this.optDistricts.push(options[i] || \"\");\n      }\n\n      this.isDsSet = true;\n      const buildings = options.map(item => item.id);\n      getFilterOptionsBuilding(buildings.join(\",\")).then(options => {\n        for (let i = 0; i < options.length; i++) {\n          this.optBuildings.push(options[i] || \"\");\n        }\n\n        this.isBdSet = true;\n        const classes = options.map(item => item.id);\n        getFilterOptionsClass(classes.join(\",\")).then(options => {\n          for (let i = 0; i < options.length; i++) {\n            this.optClasses.push(options[i] || \"\");\n          }\n\n          this.isClSet = true;\n        });\n      });\n    }); // student\n    //getFilterOptions('student')\n    //.then(options => {\n    //for (let i = 0; i < options.length; i++) {\n    // this.optStudents.push(options[i].name || '');\n    //}\n    // this.isStSet = true;\n    // });\n    // }\n  }\n\n  setDistrictsOpt(value) {\n    this.optDistricts = [...value];\n  }\n\n  setPostQuery(name, value) {\n    this.postQuery = _objectSpread({}, this.postQuery, {\n      [name]: value\n    });\n  }\n\n  setBuildingOpt(value) {\n    this.optBuildings = [...value];\n  }\n\n  setClassesOpt(value) {\n    this.optClassessetPostQuery = _objectSpread({}, this.postQuery, {\n      [name]: value\n    });\n  }\n\n  downloadFile(setIsLoading, URL, data) {\n    console.log(\"\".concat(URL).concat(data));\n    const URI = !data ? URL : \"\".concat(URL).concat(data);\n    axios.get(URI, {}).then(res => {\n      if (res) {\n        console.log(\"res\", res);\n        window.location.href = \"\".concat(URL).concat(data);\n        console.log(\"href\");\n        return res;\n      }\n    }).then(res => {\n      //console.log(\"data\", data)\n      //window.open(`${URL}${data}`, \"_blanc\");\n      //window.location.href = URL;\n      console.log(\"res2\", res);\n    }).catch(err => console.log(\"err\", err)).finally(() => {\n      //window.open(URI, \"_blanc\");\n      console.log(\"finally\");\n      setIsLoading(false);\n    });\n  }\n\n}\n\ndecorate(ViewModeStore, {\n  optBuildings: observable,\n  isBdSet: observable,\n  optDistricts: observable,\n  isDsSet: observable,\n  optClasses: observable,\n  isClSet: observable,\n  optStudents: observable,\n  isStSet: observable,\n  postQuery: observable,\n  isDistrictSelected: observable,\n  isBuildingsSelected: observable,\n  isGradeSelected: observable,\n  getDownloadFile: action,\n  setBuildingOpt: action.bound,\n  setDistrictsOpt: action.bound,\n  setClassesOpt: action.bound,\n  setPostQuery: action.bound,\n  setIsBuildingsSelected: action.bound,\n  setIsDistrictSelected: action.bound,\n  setIsGradeSelected: action,\n  isEmptyData: observable,\n  setEmptyData: action.bound //isConnectionError: observable,\n  //errorData: action.bound\n\n});\nexport default (() => new ViewModeStore());","map":{"version":3,"sources":["/Users/brohik/repo/adaptive-data-file-extract/src/stores/ViewModeStore.js"],"names":["decorate","observable","action","configure","axios","getFilterOptionsBuilding","getFilterOptionsDistrict","getFilterOptionsClass","getCSVFile","ViewModeStore","constructor","optBuildings","isBdSet","optDistricts","isDsSet","optClasses","isClSet","optStudents","isStSet","postQuery","errorData","isGradeSelected","isBuildingsSelected","isDistrictSelected","isClassSelected","isEmptyData","isConnectionError","setIsGradeSelected","value","setIsBuildingsSelected","setIsDistrictSelected","setIsClassSelected","setEmptyData","condition","getDownloadFile","data","setIsLoading","URL","checkingUrlData","get","then","res","console","log","downloadFile","catch","err","options","districts","i","length","push","buildings","map","item","id","join","classes","setDistrictsOpt","setPostQuery","name","setBuildingOpt","setClassesOpt","optClassessetPostQuery","URI","window","location","href","finally","bound"],"mappings":"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","sourcesContent":["import { decorate, observable, action, configure } from \"mobx\";\nimport axios from \"axios\";\nimport {\n  getFilterOptionsBuilding,\n  getFilterOptionsDistrict,\n  getFilterOptionsClass,\n  //defaultConnection,\n  getCSVFile\n} from \"@/stores/wrd_apis\";\n\nclass ViewModeStore {\n\n  optBuildings = [];\n  isBdSet = false;\n\n  optDistricts = [];\n  isDsSet = false;\n\n  optClasses = [];\n  isClSet = false;\n\n  optStudents = [];\n  isStSet = false;\n\n  postQuery = {};\n\n  errorData = []\n\n  isGradeSelected = false;\n\n  isBuildingsSelected = false;\n\n  isDistrictSelected = false;\n\n  isClassSelected = false;\n\n  isEmptyData = false;\n\n  isConnectionError = false;\n\n  constructor() {\n    /*defaultConnection()\n    .then(res => {\n        if(res){\n        console.log(\"RES--\", res)\n            //return res.message\n        } else {\n            this.getData;\n        }\n    })\n    .catch(err => {\n\n    console.log(\"ERR--\",err)\n    //this.isConnectionError = true\n    //this.errorData.push(\"service is down\")\n\n    })\n*/\n   // const getData = () => {\n    getFilterOptionsDistrict().then(options => {\n      let districts = [];\n      for (let i = 0; i < options.length; i++) {\n        this.optDistricts.push(options[i] || \"\");\n      }\n      this.isDsSet = true;\n      const buildings = options.map(item => item.id);\n      getFilterOptionsBuilding(buildings.join(\",\")).then(options => {\n        for (let i = 0; i < options.length; i++) {\n          this.optBuildings.push(options[i] || \"\");\n        }\n        this.isBdSet = true;\n        const classes = options.map(item => item.id);\n        getFilterOptionsClass(classes.join(\",\")).then(options => {\n          for (let i = 0; i < options.length; i++) {\n            this.optClasses.push(options[i] || \"\");\n          }\n          this.isClSet = true;\n        });\n      });\n    });\n    // student\n    //getFilterOptions('student')\n    //.then(options => {\n    //for (let i = 0; i < options.length; i++) {\n    // this.optStudents.push(options[i].name || '');\n    //}\n    // this.isStSet = true;\n    // });\n   // }\n  }\n\n  setIsGradeSelected = (value) => {\n    this.isGradeSelected = value;\n  };\n\n  setIsBuildingsSelected = (value) => {\n    this.isBuildingsSelected = value;\n  };\n\n  setIsDistrictSelected = (value) => {\n    this.isDistrictSelected = value;\n  };\n\n  setIsClassSelected = (value) => {\n    this.isClassSelected = value;\n  };\n\n  setDistrictsOpt(value) {\n    this.optDistricts = [...value];\n  }\n  setPostQuery(name, value) {\n    this.postQuery = {\n      ...this.postQuery,\n      [name]: value\n    };\n  }\n\n\n  setBuildingOpt(value) {\n    this.optBuildings = [...value];\n  }\n\n  setClassesOpt(value) {\n    this.optClassessetPostQuery= {\n      ...this.postQuery,\n      [name]: value\n    };\n  }\n\n  setEmptyData = (condition) => {\n    this.isEmptyData = condition;\n  }\n\n  getDownloadFile = async (data, setIsLoading) => {\n    const URL = \"http://localhost:9201/adaptive/v1/research?\"\n    const checkingUrlData = \"http://localhost:9201/adaptive/v1/research/count\"\n    axios.get(checkingUrlData, {}).then((res) => {\n      console.log(\"res\", res);\n      if (res.data > 0) {\n        this.downloadFile(setIsLoading, URL, data)\n      } else {\n        console.log(\"No Record found of given search\")\n        this.setEmptyData(true);\n      }\n    }).catch(err => {\n      this.setEmptyData(true);\n      console.log(\"ERR\" , err)\n    })\n  }\n\n  downloadFile(setIsLoading, URL, data) {\n  console.log(`${URL}${data}`)\n\n  const URI = !data ? URL : `${URL}${data}`\n    axios.get(URI, {\n    })\n      .then((res) => {\n        if (res) {\n          console.log(\"res\", res)\n          window.location.href = `${URL}${data}`\n          console.log(\"href\")\n          return res\n        }\n      })\n      .then((res) => {\n        //console.log(\"data\", data)\n        //window.open(`${URL}${data}`, \"_blanc\");\n        //window.location.href = URL;\n        console.log(\"res2\", res)\n      })\n      .catch(err => console.log(\"err\", err))\n      .finally(() => {\n       //window.open(URI, \"_blanc\");\n       console.log(\"finally\")\n        setIsLoading(false)\n      })\n  }\n\n}\n\ndecorate(ViewModeStore, {\n  optBuildings: observable,\n  isBdSet: observable,\n  optDistricts: observable,\n  isDsSet: observable,\n  optClasses: observable,\n  isClSet: observable,\n  optStudents: observable,\n  isStSet: observable,\n  postQuery: observable,\n  isDistrictSelected: observable,\n  isBuildingsSelected: observable,\n  isGradeSelected: observable,\n  getDownloadFile: action,\n  setBuildingOpt: action.bound,\n  setDistrictsOpt: action.bound,\n  setClassesOpt: action.bound,\n  setPostQuery: action.bound,\n  setIsBuildingsSelected: action.bound,\n  setIsDistrictSelected: action.bound,\n  setIsGradeSelected: action,\n  isEmptyData: observable,\n  setEmptyData: action.bound\n  //isConnectionError: observable,\n  //errorData: action.bound\n});\n\nexport default () => new ViewModeStore();\n"]},"metadata":{},"sourceType":"module"}